# 3rd party completion loader for cargo                    -*- shell-script -*-
#
# This serves as a fallback in case the completion is not installed otherwise.

# shellcheck disable=SC2168 # "local" is ok, assume sourced by __load_completion
local _comp__load_3rdparty_reset_shopt=$(shopt -po posix)
set +o posix

local rustup="${1%cargo}rustup" # use rustup from same dir
. <("$rustup" completions bash cargo 2>/dev/null)

$_comp__load_3rdparty_reset_shopt

{
    complete -p "$1" || complete -p "${1##*/}"
} &>/dev/null

# ex: filetype=sh
